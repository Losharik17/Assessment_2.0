{% extends "main_0.html" %}

{% block app_content %}
    <link rel="stylesheet"  href="{{ url_for('static', filename='viewer.css') }}">
    <link rel="stylesheet"  href="{{ url_for('static', filename='login.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/3.3.4/jquery.inputmask.bundle.min.js"></script>

    <div class="content">
        <h1 class="title">Создание проекта</h1>

        <form style=" position:relative; box-shadow: 2px 4px 8px 4px #c5c5c5; padding: 10px;
              border-radius: 10px; width: fit-content; margin: 0 auto; height: max-content"
              action="{{ url_for('main.create_project', viewer_id=viewer_id) }}" method="POST"
              enctype="multipart/form-data">
            <div class="block">
                <div class="block_1">


                    <div class="add_new">
                        <div>
                            <div class="block_4" >
                                <lable for="name">
                                    <input name="name" id="name" type="text" placeholder="Название проекта" class="input_text_1"
                                           value="{% if form is defined and form.get('name') is not none %}{{ form.get('name') }}{% endif %}" >
                                </lable>
                            </div>
                            <div style="margin-top: 10px;" class="block_4">
                                <div  class="form_group">
                                    <label for="start" class="form_label">Начало Проекта</label>
                                    <input id="start" name="start" type="text" class="form_input"
                                           value="{% if form is defined and form.get('start') is not none %}{{ form.get('start') }}{% endif %}">
                                </div>
                                <div class="form_group">
                                    <label for="end" class="form_label">Конец Проекта</label>
                                    <input id="end" name="end" type="text" class="form_input"
                                           value="{% if form is defined and form.get('end') is not none %}{{ form.get('end') }}{% endif %}">
                                </div>
                            </div>
                            <div id="block_4_1" class="block_4">
                                <label for="name0"></label>
                                <input id="name0" name="name0" size="16" type="text" class="input_text_2" placeholder="Критерий 1"
                                       value="{% if form is defined and form.get('name0') is not none %}{{ form.get('name0') }}{% endif %}"/>
                                <div class="block_5">
                                    <input id="minus0" class="button" type="button" value="-">
                                    <input class="crit" type="number" name="weight0" id="weight0" step="0.1" max="2.0" min="0.1"
                                           value="{% if form is defined and form.get('weight0') is not none %}{{ form.get('weight0') }}{% else %}1.0{% endif %}"/>
                                    <input id="plus0" class="button" type="button" value="+">
                                </div>
                            </div>
                            {% if form is defined %}
                                {% for i in range(form.get('quantity')|int - 1) %}
                                    {% if form.get('name{}'.format(i + 1)) != '' or form.get('weight{}'.format(i + 1)) != '1.0' %}
                                        <div id="parameter{{ i + 1 }}">
                                            <div id="block_4_1" class="block_4">
                                                <label for="name{{ i + 1 }}"></label>
                                                <input id="name{{ i + 1 }}" name="name{{ i + 1 }}" size="16" type="text" class="input_text_2" placeholder="Критерий {{ i + 2 }}"
                                                       value="{% if form is defined and form.get('name{}'.format(i + 1)) is not none %}{{ form.get('name{}'.format(i + 1)) }}{% endif %}"/>
                                                <div class="block_5">
                                                    <input id="minus{{ i + 1 }}" class="button" type="button" value="-">
                                                    <input class="crit" type="number" name="weight{{ i + 1 }}" id="weight{{ i + 1 }}" step="0.1" max="2.0" min="0.1"
                                                           value="{% if form is defined and form.get('weight{}'.format(i + 1)) is not none %}{{ form.get('weight{}'.format(i + 1)) }}{% else %}1.0{% endif %}"/>
                                                    <input id="plus{{ i + 1 }}" class="button" type="button" value="+">
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                {% endfor %}
                                <script>console.log({{ form.get('quantity') }}, {{ form.get('name3') }})</script>
                            {% endif %}
                       </div>
                        <input type="button"  class="add_1" id="button_add" value="Добавить">
                        <input type="button"  class="add_2" id="button_delete" value="Удалить">
                        <br>
                    </div>
                </div>

                <div class="block_2">
                    <div class="input__wrapper">
                        <input name="logo" type="file" id="logo" class="input input__file">
                        <label for="logo" class="input__file-button">
                            <span class="input__file-icon-wrapper"><img class="input__file-icon" src="{{ url_for('static', filename='/download.png') }}" alt="Выбрать файл" width="25"></span>
                            <span class="input__file-button-text">Загрузить Логотип</span>
                        </label>
                    </div>
                    <div class="input__wrapper">
                        <input  type="file" name="users" id="users" class="input input__file">
                        <label for="users" class="input__file-button">
                            <span class="input__file-icon-wrapper"><img class="input__file-icon" src="{{ url_for('static', filename='/download.png') }}" alt="Выбрать файл" width="25"></span>
                            <span class="input__file-button-text">Загрузить Участников</span>
                        </label>
                    </div>
                    <div class="input__wrapper">
                        <input  type="file" name="experts" id="experts" class="input input__file">
                        <label for="experts" class="input__file-button">
                            <span class="input__file-icon-wrapper"><img class="input__file-icon" src="{{ url_for('static', filename='/download.png') }}" alt="Выбрать файл" width="25"></span>
                            <span class="input__file-button-text">Загрузить Экспертов</span>
                        </label>
                    </div>
                </div>
                <input type="number" name="quantity" id="quantity"
                       value="1"
                       style="visibility: hidden" />
                <div class="container">
                    <input type="submit" onclick="waiting()" value="Создать проект" class="btn btn-5" >
                </div>
            </div>
        </form>
    </div>

        <script src="{{ url_for('static', filename='create_project.js') }}"></script>
    <script>$('#name').css('width', $('#block_4_1').width())</script>
{% endblock %}